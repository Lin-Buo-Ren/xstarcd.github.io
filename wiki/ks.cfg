# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
cdrom
lang en_US.UTF-8
keyboard us
#network --onboot no --device eth0 --bootproto dhcp --noipv6
network --bootproto=static --device=eth0 --gateway=192.168.0.253 --ip=192.168.0.100 --nameserver=8.8.8.8 --netmask=255.255.255.0 --onboot=on --noipv6
rootpw  --iscrypted $6$UjXwk2nY2Bf/Sn.7$fzUD2jle4uA7jmuOoYbWlHulhUA7Qr7m/jnUHqd8ba4aLLx9oeqfKRGDNrpISQcWL7cd.KmXDPRfgx2oZYtOg1

firewall --disabled
#firewall --service=ssh

authconfig --enableshadow --passalgo=sha512

text

selinux --enforcing
#selinux --disabled
timezone --utc Asia/Shanghai
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"

zerombr
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
# clearpart --none
clearpart --all

part /boot --fstype=ext4 --size=250
part pv.008002 --size=40709

volgroup vg_m1 --pesize=4096 pv.008002
logvol swap --name=lv_swap --vgname=vg_m1 --size=8000
logvol / --fstype=ext4 --name=lv_root --vgname=vg_m1 --size=32708

# use cdrom install
# repo --name="CentOS"  --baseurl=cdrom:sr0 --cost=100


%post
#在这里添加自定义脚本，以修改IP地址等
#!/bin/sh
#切换到3#终端
exec < /dev/tty3 > /dev/tty3
#获取输入
echo "Please input IP addr:"
read ip
#查找置顶ip地址
sed -i "s/^IPADDR=.*$/IPADDR=$ip/" /etc/sysconfig/network-scripts/ifcfg-eth0
#重新切换回1#终端，完成安装
exec < /dev/tty1 > /dev/tty1
%end


%packages --nobase
@Core

# %packages
# @base
# @core

# @server-policy

%end




